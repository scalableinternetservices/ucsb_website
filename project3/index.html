<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Scalable Internet Services</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  </head>

  <body>

        <div class="container-fluid">
      <div class="row-fluid">
        <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Scalable Internet Services</a>
          </div>
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
              <li class="active"><a href="/schedule/">Class Schedule</a></li>
              <li class="active"><a href="/project1/">Project 1</a></li>
              <li class="active"><a href="/project2/">Project 2</a></li>
              <li class="active"><a href="/project3/">Project 3</a></li></ul>
          </div>
        </div>
      </div>
    </div>


    <div class="container container-left">
      <div class="row">
        <div class="col-md-3">
          <div class="sidebar">
  <h1 id="course-info">Course Info</h1>

<ul>
  <li>Course Number: CS291A</li>
  <li>Quarter: Fall 2025</li>
</ul>

<h2 id="instructor">Instructor</h2>

<ul>
  <li><a href="https://www.linkedin.com/in/zachary-walker-6a219059/">Zach Walker</a></li>
  <li><a href="mailto:zach_walker@ucsb.edu">email</a></li>
</ul>

<!-- ## UCSB TA

- TBD

## Appfolio TA

- Maximilian Medearis
- [email](mailto:maximilian.medearis@appfolio.com)


Please use [Piazza](https://piazza.com/ucsb/fall2025/cs291a) for class-related correspondance.
 -->

<h2 id="dates">Dates</h2>

<h3 id="classes">Classes</h3>

<ul>
  <li>Mon and Wed</li>
  <li>1:00pm – 2:50am PT</li>
  <li>Phelps 2510</li>
</ul>

<h3 id="office-hours">Office Hours</h3>

<!-- - TBD

In-person

- Tuesday 8am -- 9am, Phelps 3526
- Thursday 8am -- 9am, Phelps 3526

Virtual

- Tuesday 4 -- 5pm, link in [Piazza](https://piazza.com/ucsb/fall2025/cs291a)
- Friday 4 -- 5pm, link in [Piazza](https://piazza.com/ucsb/fall2025/cs291a) -->

<h3 id="initial-tasks-due-before">Initial tasks due before</h3>

<p>Wednesday, Oct 1 12pm PT</p>

<ul>
  <li>Complete the <a href="https://forms.gle/TyxFWZnkW9qaqBhE7">introduction survey</a></li>
  <li>Join the class on <a href="https://piazza.com/ucsb/fall2025/cs291a">Piazza</a></li>
</ul>

<!-- - Enroll in [AWS Educate](https://www.awseducate.com/Registration?apptype=student&courseview=true) -->

<h3 id="project-1project1-due-before"><a href="/project1/">Project 1</a> due before</h3>

<p>Wednesday, October 8th 10am PT</p>

<h3 id="project-2project2-due-before"><a href="/project2/">Project 2</a> due before</h3>

<p>Wednesday, October 22 10am PT</p>

<h3 id="project-3project3-team-message-due-before"><a href="/project3/">Project 3</a> Team Message due before</h3>

<p>Wednesday, October 29 10am PT</p>

<h3 id="project-3project3-due-before"><a href="/project3/">Project 3</a> due before</h3>

<p>Monday, November 10 10am PT</p>

<h2 id="class-resources">Class Resources</h2>

<p><a href="https://piazza.com/ucsb/fall2025/cs291a">Piazza</a>: Use to receive class announcements, ask and
answer questions, and to communicate with instructor. Access code is available
in Google Drive and will be shared in the first class.</p>

<p><a href="https://github.com/scalableinternetservices">GitHub</a>: Contains content for
this site. Additionally all student projects will live here.</p>

<h2 id="textbooks">Textbooks</h2>

<p><a href="https://www.amazon.com/High-Performance-Browser-Networking-performance/dp/1449344763">High Performance Browser Networking</a><br />
ISBN: 9781449344764<br />
<em><a href="https://hpbn.co/">Available online</a>.</em><br />
Note: The online version is slightly more up-to-date.</p>

<p><a href="https://www.railstutorial.org/book">The Ruby On Rails Tutorial</a><br />
<!-- _[Complete 3rd edition available online](https://3rd-edition.railstutorial.org/book)_   -->
Optional
Note: This book is only useful once we get to the primary project.</p>

</div>

        </div>
        <div class="col-md-9">
          <h1 id="project-3-rails-backend-with-docker">Project 3: Rails Backend with Docker</h1>

<p>This project builds upon Project 2 by having you create your own Rails backend that implements the same API you integrated with in the previous project. You’ll develop this application using Docker containers to get familiar with containerized development.</p>

<p>This team can be completed alone or in teams of 2.  If you choose to work as team, you must send me a message on Piazza by Wed 10/29 at 10am listing who you will be working with on this project.</p>

<h2 id="learning-outcomes">Learning Outcomes</h2>

<ul>
  <li>Student can create a Rails API application using the Rails API generator</li>
  <li>Student can implement REST API endpoints following a specification</li>
  <li>Student can configure Rails to work with MySQL database</li>
  <li>Student can develop applications using Docker containers</li>
  <li>Student can use Docker Compose for multi-container development</li>
  <li>Student can implement authentication and authorization in Rails</li>
  <li>Student can work with Rails models, controllers, and routes</li>
  <li>Student is familiar with Rails testing framework</li>
</ul>

<h2 id="project-submission">Project Submission</h2>

<p><a href="https://forms.gle/hicZ2SNaVhb3ApXQ7">https://forms.gle/hicZ2SNaVhb3ApXQ7</a></p>

<h2 id="whats-included">What’s Included</h2>

<ul>
  <li><strong>Docker Environment</strong>: Dockerfile and docker-compose.yml for containerized development</li>
  <li><strong>API Specification</strong>: Complete API documentation that your Rails app must implement</li>
  <li><strong>Database</strong>: MySQL database configured for Rails development</li>
</ul>

<h2 id="download-the-project">Download the Project</h2>

<p>Download the starter project: <a href="/project3.zip">project3.zip</a></p>

<p><strong>Starter Contents:</strong></p>

<p><em>API_SPECIFICATION.md</em> - the spec to be implemented <br />
<em>project3_er_diagram.png</em> - ER diagram for the models and relationships needed to implement the API spec <br />
<em>docker-compose.yml</em> - basic docker-compose setup for running a db and web container in development <br />
<em>Dockerfile</em> - Configuration of the web container <br />
<em>/app/services/jwt_service.rb</em> - Simple service class for creating JWT tokens used for authentication <br />
<em>/test/requests/auth_test.rb</em> - Test that will validate that your auth endoints work as expected <br />
<em>/test/requests/cookie_configuration_test.rb</em> - Test that will validate that your session cookie is properly configured <br />
<em>/test/requests/conversations_test.rb</em> - Test that the conversation api endpoints work as expected <br />
<em>/test/servuces/jwt_service_test.rb</em> - A test for the provided jwt_service.rb file \</p>

<h2 id="quick-start">Quick Start</h2>

<ol>
  <li><strong>Extract the project files</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unzip project3.zip
<span class="nb">cd </span>project3
</code></pre></div>    </div>
  </li>
  <li><strong>Start the development environment</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose up <span class="nt">-d</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Access the Rails container</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose <span class="nb">exec </span>web bash
</code></pre></div>    </div>
  </li>
  <li><strong>Inside the container, create your Rails API app</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install Rails if not already installed</span>
gem <span class="nb">install </span>rails
   
<span class="c"># Create new Rails API application</span>
rails new <span class="nb">.</span> <span class="nt">--name</span> help_desk_backend <span class="nt">--api</span> <span class="nt">--skip-kamal</span> <span class="nt">--skip-thruster</span>  <span class="nt">--database</span><span class="o">=</span>mysql
   
<span class="c"># Add required gems to Gemfile</span>
gem <span class="s2">"rack-cors"</span> <span class="c"># For handling Cross-Origin Resource Sharing (CORS) requests from the frontend</span>
gem <span class="s2">"jwt"</span> <span class="c"># For JSON Web Token authentication (if you choose JWT over sessions)</span>
gem <span class="s2">"activerecord-session_store"</span> <span class="c"># For database-backed session storage</span>
group :test <span class="k">do
   </span>gem <span class="s2">"mocha"</span>
end

<span class="c"># Add the following line to help_desk_backend/test/test_helper.rb</span>
require <span class="s2">"mocha/minitest"</span>
   
<span class="c"># Install dependencies</span>
bundle <span class="nb">install</span>
   
<span class="c"># Create the database</span>
rails db:create
   
<span class="c"># Start the Rails server</span>
rails server <span class="nt">-b</span> 0.0.0.0 <span class="nt">-p</span> 3000
</code></pre></div>    </div>
  </li>
  <li><strong>Access your application</strong> at <code class="language-plaintext highlighter-rouge">http://localhost:3000</code></li>
</ol>

<h2 id="development-environment">Development Environment</h2>

<h3 id="services">Services</h3>

<ul>
  <li><strong>web</strong>: Rails development container with Ruby 3.4.5</li>
  <li><strong>db</strong>: MySQL 8.0 database server</li>
</ul>

<h3 id="ports">Ports</h3>

<ul>
  <li><strong>3000</strong>: Rails development server</li>
  <li><strong>3306</strong>: MySQL database</li>
</ul>

<h3 id="session-configuration">Session Configuration</h3>

<p>For API applications, you’ll need to configure database-backed sessions:</p>

<ol>
  <li><strong>Generate session migration</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails generate active_record:session_migration
</code></pre></div>    </div>
  </li>
  <li><strong>Run the migration</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails db:migrate
</code></pre></div>    </div>
  </li>
  <li><strong>Add session middleware</strong> in <code class="language-plaintext highlighter-rouge">config/application.rb</code>:
    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">config</span><span class="p">.</span><span class="nf">middleware</span><span class="p">.</span><span class="nf">use</span> <span class="no">ActionDispatch</span><span class="o">::</span><span class="no">Cookies</span>
<span class="n">config</span><span class="p">.</span><span class="nf">middleware</span><span class="p">.</span><span class="nf">use</span> <span class="no">ActionDispatch</span><span class="o">::</span><span class="no">Session</span><span class="o">::</span><span class="no">ActiveRecordStore</span><span class="p">,</span> <span class="p">{</span>
  <span class="ss">expire_after: </span><span class="mi">24</span><span class="p">.</span><span class="nf">hours</span><span class="p">,</span>
  <span class="ss">same_site: </span><span class="no">Rails</span><span class="p">.</span><span class="nf">env</span><span class="p">.</span><span class="nf">development?</span> <span class="p">?</span> <span class="ss">:lax</span> <span class="p">:</span> <span class="ss">:none</span><span class="p">,</span>
  <span class="ss">secure: </span><span class="no">Rails</span><span class="p">.</span><span class="nf">env</span><span class="p">.</span><span class="nf">production?</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>This setup allows your Rails API to maintain user sessions across requests, which is essential for authentication functionality.</p>

<h3 id="cors-configuration">CORS Configuration</h3>

<p>After adding the <code class="language-plaintext highlighter-rouge">rack-cors</code> gem, configure it in <code class="language-plaintext highlighter-rouge">config/application.rb</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Add this inside the Application class</span>
<span class="n">config</span><span class="p">.</span><span class="nf">middleware</span><span class="p">.</span><span class="nf">insert_before</span> <span class="mi">0</span><span class="p">,</span> <span class="no">Rack</span><span class="o">::</span><span class="no">Cors</span> <span class="k">do</span>
  <span class="n">allow</span> <span class="k">do</span>
    <span class="n">origins</span> <span class="p">[</span>
        <span class="s1">'http://localhost:5173'</span><span class="p">,</span>
        <span class="s1">'http://127.0.0.1:5173'</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">resource</span> <span class="s1">'*'</span><span class="p">,</span>
      <span class="ss">headers: :any</span><span class="p">,</span>
      <span class="ss">methods: </span><span class="p">[</span><span class="ss">:get</span><span class="p">,</span> <span class="ss">:post</span><span class="p">,</span> <span class="ss">:put</span><span class="p">,</span> <span class="ss">:patch</span><span class="p">,</span> <span class="ss">:delete</span><span class="p">,</span> <span class="ss">:options</span><span class="p">,</span> <span class="ss">:head</span><span class="p">],</span>
      <span class="ss">credentials: </span><span class="kp">true</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>This allows your frontend application to make requests to your Rails API when hosted in different domains.  Even though both may be hosted on localhost during development localhost:3000 is considered a different domain that localhost 5173.</p>

<h2 id="assignment-files">Assignment Files</h2>

<p>You should also have received these files with your assignment:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">API_SPECIFICATION.md</code> - Complete API documentation that your Rails app must implement</li>
</ul>

<h2 id="what-you-need-to-implement">What You Need to Implement</h2>

<h3 id="rails-api-application">Rails API Application</h3>

<p>Create a Rails API application that implements all endpoints specified in the <code class="language-plaintext highlighter-rouge">API_SPECIFICATION.md</code> file. The API should include:</p>

<p>Below is a possible organization of your application.  It is not the only possible organization.</p>

<p>Controllers:</p>
<ul>
  <li>AuthController (Uses session cookie for authentication where needed (register and login do not require auth) )</li>
  <li>ConversationsController (Uses JWT for token based authentication)</li>
  <li>MessagesController (Uses JWT for token based authentiation)</li>
  <li>HealthController (No authentication neccessary)</li>
  <li>UpdatesController (Uses JWT for token based authentication)</li>
  <li>ExpertContriller (Users JWT for token based authentication)</li>
</ul>

<p>Models:</p>
<ul>
  <li>User</li>
  <li>Message</li>
  <li>Conversation</li>
  <li>ExpertAssignment</li>
  <li>ExpertProfile</li>
</ul>

<p><img src="/project3_er_diagram.png" alt="Project 3 ER Diagram" /></p>

<h3 id="docker-development">Docker Development</h3>

<ul>
  <li>Use the provided Dockerfile and docker-compose.yml</li>
  <li>Ensure your application runs properly in containers</li>
  <li>Test that the database connection works correctly</li>
</ul>

<h3 id="implementation-strategy">Implementation Strategy</h3>
<ul>
  <li>Use github from the beginning</li>
  <li>Consider breaking down the work into a set of tasks in a TODO style list.  For Example
    <ul>
      <li>Create a git repo</li>
      <li>Get the server running in the docker environment</li>
      <li>Add the User model
        <ul>
          <li>adds db migration</li>
          <li>creation of ActiveRecord model file</li>
          <li>adds any Tests for the User model</li>
        </ul>
      </li>
      <li>Add the UsersController with a registration action
        <ul>
          <li>adds The UsersController file</li>
          <li>adds an action to the Users Controller file for registering a new user</li>
          <li>adds an entry to the routes.rb file for the new controller action</li>
          <li>adds tests of the user registration controller action</li>
        </ul>
      </li>
      <li>…</li>
    </ul>
  </li>
  <li>Commit small changes frequently with meaningful commit messages.  For example
    <ul>
      <li>Creating the User Model</li>
      <li>Adding the UsersController with a registration action for new users</li>
      <li>…</li>
    </ul>
  </li>
  <li>Consider when you want to implement authentication/authorization
    <ul>
      <li>Could you delay implementing authentication or authorization or both until after you have implemented the api functionality?
        <ul>
          <li>What are the pros and cons of this?</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="testing-your-implementation">Testing Your Implementation</h2>

<h3 id="writing-request-tests">Writing request tests</h3>

<ul>
  <li>Use the example test files provided in the starter package to test your AuthController and ConversationsController.</li>
  <li>Writing additional tests that follow the same structure for your other controllers will help you confirm your code is working without needing to integrate with the front end.</li>
</ul>

<h3 id="using-the-project-2-frontend">Using the Project 2 Frontend</h3>

<ol>
  <li><strong>Start your Rails backend</strong> (running on <code class="language-plaintext highlighter-rouge">http://localhost:3000</code>)</li>
  <li><strong>Run your Project 2 frontend</strong> from the previous assignment</li>
  <li><strong>Configure the frontend</strong> to point to your Rails backend:
    <ul>
      <li>Go to Settings in the frontend</li>
      <li>Change Backend Mode to “API (Real Backend)”</li>
      <li>Set API Base URL to: <code class="language-plaintext highlighter-rouge">http://localhost:3000</code></li>
      <li>Save configuration</li>
    </ul>
  </li>
  <li><strong>Test all functionality</strong> using the frontend interface</li>
</ol>

<h3 id="api-testing">API Testing</h3>

<p>If you need to, you can also test your API directly using tools like:</p>
<ul>
  <li><strong>Postman</strong> for API testing</li>
  <li><strong>curl</strong> commands from the terminal</li>
  <li><strong>Rails console</strong> for database testing</li>
</ul>

<h2 id="what-you-will-turn-in">What you will turn in</h2>

<ol>
  <li>A link to your github repo containing your backend implementation</li>
  <li>A video walk through of your frontend (project2) and backend (project3) applications working together to accomplish the following flows</li>
</ol>

<h2 id="cases-to-cover-in-demo-video">Cases to cover in demo video</h2>

<ul>
  <li>Registration of a new user</li>
  <li>
    <p>Login of the new user</p>
  </li>
  <li>As a question asker
    <ul>
      <li>starting a new conversation</li>
      <li>Show the new conversation appears in the conversation list</li>
      <li>view their list of created conversations
        <ul>
          <li>list of conversations only includes conversations initiated by the current user</li>
        </ul>
      </li>
      <li>posting a message to a conversation</li>
      <li>receive a new message for a conversation without refreshing the screen</li>
    </ul>
  </li>
  <li>As an expert
    <ul>
      <li>modifying expert profile</li>
      <li>view the list of conversations initiated by other users</li>
      <li>claiming a conversation as an expert</li>
      <li>responding with a new message to a claimed conversation</li>
      <li>receive a new message for a conversation without refreshing the screen</li>
      <li>unclaim a conversation</li>
    </ul>
  </li>
</ul>

<h2 id="getting-help">Getting Help</h2>

<ol>
  <li>Refer to the Rail Intro lecture slides</li>
  <li>Refer to API_SPECIFICATION.md file</li>
  <li>Compare output for project2backend.cs291.com</li>
  <li>Ask questions in Piazza</li>
  <li>Pair with classmates</li>
  <li>Schedule time with the intructor to get assistance</li>
</ol>

        </div>
      </div>
    </div>

    <div class="container-fluid">
  <div class="row-fluid">
    <div class="span12 footer navbar-inverse navbar-fixed-bottom">
      <p class="copyright">
        &copy; 2014-2021 <a href="https://www.linkedin.com/in/bryceboe/">Dr. Bryce Boe</a>
        &copy; 2022 <a href="https://www.linkedin.com/in/nevenagolubovic/">Dr. Nevena Golubovic</a>
        &copy; 2023 <a href="https://www.linkedin.com/in/shyr-shea-chang-6426271b8/">Dr. Shyr-Shea Chang</a>
        &copy; 2025 <a href="https://www.linkedin.com/in/zachary-walker-6a219059/">Zach Walker</a>.
      </p>
    </div>
  </div>
</div>


  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

  </body>

</html>